# 5. QGISのインストールと使用方法

## QGISとは

QGISは、WindowsやMac、Linuxなどクロスプラットフォームで稼働するオープンソースのGISソフトです。  
GISデータの作成・編集・閲覧・分析など、商用のGISソフトに匹敵する一連のGIS機能を持っており、プラグインを使用することにより機能を強化することもできます。

### 【QGISの特徴】

* GNUライセンス（オープンソース）のため無料で使用可能 
* OSGeo（Open Source Geospatial Foundation）のオフィシャルプロジェクト
* Lunux, Unix, Mac OSX, Windows, Andoidのクロスプラットフォーム で動作
* 数多くのベクター、ラスター、データベースフォーマットや機能をサポート
* 有料・高額なGISソフト（代表的なものはArcGIS）に近い機能・操作性
* プラグインで機能を追加することが可能  

本講座ではこのQGISを用いて地質図の作成を行います。  
まずご自身のPCにQGISをインストールして、地質図の作成環境を準備しましょう。

## QGISの動作環境とインストール

QGISは、「[QGISプロジェクト](http://qgis.org/ja/site/)」のWebサイトから最新バージョンをダウンロードしPCにインストールして無料で使用することができます。 本講座では **バージョン3.x** を使用しています。  
以下の手順でQGISプロジェクトサイトからインストーラをダウンロードして、PCにインストールしてください。

> 【QGISを快適に動作させるのに必要なPCのスペック（Windowsの場合）】  
> QGISは画像を多用するため、それなりのスペックのPCでないと快適に動作してくれません。  
> 調査時の携帯性を優先して軽量小型のノートPCを持って行ったはよいが、サクサク動かずに余計に手間がかかってしまっては意味がありません。なるべく高スペックのPCが望ましいのですが、ある程度のスペックが必要となりますので、下記を参考にインストールするPCを選定してください。  
>   
> ・画面の解像度は最低 1024×768 は必要です。ノートPCの場合はこれより小さい場合が多いので注意してください。  
> ・メモリは最低4GB（Windows10の場合）あったほうがよいです。  
> ・ 空ストレージ容量は、最低２GB必要です。また、地物データ量が多くなるとデータの読み書きで時間がかかるため、SSDタイプのストレージの方が望ましいです。  
> ・地物の描画にはマウスが必須です。マウスを忘れないで持っていくようにしましょう。

### 【実習1】QGISをインストールする

QGISをPCにインストールして使用できるようにしてください。  
Windows10の場合のインストールの手順は以下の通りです。

#### 1.QGISのインストーラをダウンロードする

① 以下のQGISプロジェクトのサイトより **[ダウンロードする]** をクリックします。 [https://www.qgis.org/ja/site/](https://www.qgis.org/ja/site/)

![QGISプロジェクトホームページ](./img/chapter05_01.png)  
<sup>QGISプロジェクトホームページ（[ダウンロード]をクリック）</sup>

② ダウンロードページで、「Windows版のダウンロード」の中にある **[QGISスタンドアロンインストーラ Version 3.x]** をクリックして、インストーラファイルをPCの任意の場所にダウンロードします。  
インストールするファイルは、PCの環境（32bitまたは64bit）に応じて最適なものを選択してください。  

![QGISダウンロードページ](./img/chapter05_02.png)  
<sup>インストールするファイルを選択してクリック）</sup>

③ **「名前を付けて保存」ダイアログ**が表示されるので、PCの任意の場所にインストーラファイルを保存します。  

![QGISダウンロードファイルを保存](./img/chapter05_03.png)  
<sup>ダウンロードファイルを任意の場所に保存）</sup>

#### 2.QGISをインストールする

① ダウンロードしたインストーラファイルを選択してインストールを実行します。  
このとき、Windowsの実行ユーザーに管理者権限がないとうまくインストールできないことがあるので、ファイル名を右クリックして、**\[管理者として実行\]** をクリックするようにします。

![QGISインストール１](./img/chapter05_04.png)  
<sup>ダウンロードしたファイルを実行する</sup>

実行すると、「このアプリがデバイスに変更を加えることを許可しますか？」のメッセージが表示されたら \[はい\] をクリックしてください\)。

② セットアップウィザード画面が表示されたら \[次へ\] をクリックしてください。

![QGISインストール２](./img/chapter05_05.png)  
<sup>セットアップを開始する</sup>

③ ライセンス契約書の画面が表示されたら \[同意する\] をクリックします。

![QGISインストール３](./img/chapter05_06.png)  
<sup>ライセンスに同意する</sup>

④ QGISをインストールするフォルダを指定して \[次へ\] をクリックします。  
特にこだわりがなければ、既定で表示されているフォルダをそのまま指定しても問題ありません。

![QGISインストール４](./img/chapter05_07.png)  
<sup>インストール先を指定する</sup>

④ インストールコンポーネントはQGIS本体のみ（デフォルトで指定されている）を選択します。\[インストール\] をクリックすると、インストールプロセスが開始されます。

![QGISインストール５](./img/chapter05_08.png)  
<sup>コンポーネントを指定する</sup>

![QGISインストール６](./img/chapter05_09.png)  
<sup>インストール中</sup>  

## QGISの基本的な使い方

### 1.QGISを起動する

インストールが完了すると、デスクトップに起動リンクが格納されたフォルダが作成されます。 このフォルダ内の **「QGIS Desktop 3.x.x」** をダブルクリックするとQGISが起動します。（「3.x.x」はインストールしたバージョンです）

![デスクトップアイコン](./img/chapter05_10.png)  
<sup>デスクトップの起動アイコン</sup>  

### 2.QGISのウィンドウの構成を理解する

QGISのウィンドウ構成は以下の通りです。  
① メニューバー：各種機能を呼び出すメニュー  
② ツールバー：各種機能を呼び出すアイコン（表示・非表示が制御できます）  
③ パネル：マップの表示や操作を行う操作パネル（表示・非表示が制御できます）  
④ マップウィンドウ：地図を表示するウィンドウ  
⑤ ステータスバー：表示されている地図の各種状態を表示

![QGIS画面構成](./img/chapter05_11.png)  
<sup>QGISの画面構成</sup>  

### 3.基本的な使い方とプロジェクトファイルの構成を理解する

QGISで地図を表示・編集するには、まず「プロジェクトファイル」を作成しなければなりません。

QGISで地図を作成する基本的な手順は以下の通りです。  
1. プロジェクトファイルを新規に作成する。または、既存のプロジェクトファイルを読み込む。  
2. 地図レイヤーを追加する。  
3. レイヤー内の地物の追加・編集を行う。  
4. 保存する。  

プロジェクトファイルは、ベクターデータやラスターデータそのものを保存しているわけではなく、各データファイルへのリンク情報のみ保持していることに注意してください。 そのため、作成した地図データを他のPCやフォルダに移行したりコピーする場合は、「相対パス」でリンク情報を保持しないとそのまま移行ができません。  
プロジェクトファイルの定義は\[プロジェクト\]-\[プロパティ\]を開いて確認することができます。

### 4.各種地理空間情報の入手とQGISへの取り込み方法を理解する

* 主な地図情報 ：タイル形式で提供されている情報は、ブラウザパネルの「XYZ Tile」に接続して取得することができます。
  * 地理院タイル
  * Google Map
  * Open Street Map
* 基盤地図情報：[国土地理院のサイト](http://www.gsi.go.jp/kiban/index.html)からダウンロードして入手できます（ユーザー登録が必要です）。ダウンロードしたデータを加工してQGISに取り込むことができます。
  * 標高データ（DEM）を入手したい場合はここからダウンロードします。  
* 国土数値情報：[国土交通省のサイト](http://nlftp.mlit.go.jp/ksj/)からダウンロードしてQGISに取り込みことができます。地形、土地利用、公共施設などの国土に関する基礎的な情報が載っています。  
* 画像データのジオリファレンス：QGISメニューの **[ラスタ]-[ジオリファレンサ]** で、画像データの位置合わせを行って地図に重ねることができます。 

### 【実習2】QGISの基本的な使い方を理解する

インストールしたQGISを起動して、自分のいる場所の国土地理院地図を表示させてみましょう。

